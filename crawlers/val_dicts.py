char_dictionary = {
    "e370fa57-4757-3604-3648-499e1f642d3f": "Gekko",
    "dade69b4-4f5a-8528-247b-219e5a1facd6": "Fade",
    "5f8d3a7f-467b-97f3-062c-13acf203c006": "Breach",
    "f94c3b30-42be-e959-889c-5aa313dba261": "Raze",
    "22697a3d-45bf-8dd7-4fec-84a9e28c69d7": "Chamber",
    "601dbbe7-43ce-be57-2a40-4abd24953621": "Kay/o",
    "6f2a04ca-43e0-be17-7f36-b3908627744d": "Skye",
    "117ed9e3-49f3-6512-3ccf-0cada7e3823b": "Cypher",
    "320b2a48-4d9b-a075-30f1-1f93a9b638fa": "Sova",
    "1e58de9c-4950-5125-93e9-a0aee9f98746": "Killjoy",
    "95b78ed7-4637-86d9-7e41-71ba8c293152": "Harbor",
    "707eab51-4836-f488-046a-cda6bf494859": "Viper",
    "eb93336a-449b-9c1b-0a54-a891f7921d69": "Phoenix",
    "41fb69c1-4189-7b37-f117-bcaf1e96f1bf": "Astra",
    "9f0d8ba9-4140-b941-57d3-a7ad57c6b417": "Brimstone",
    "bb2a4828-46eb-8cd1-e765-15848195d751": "Neon",
    "7f94d92c-4234-0a36-9646-3a87eb8b5c89": "Sage",
    "a3bfb853-43b2-7238-a4f1-ad90e9e46bcc": "Reyna",
    "8e253930-4c05-31dd-1b6c-968525494517": "Omen",
    "add6443a-41bd-e414-f6ad-e58d267f4e95": "Jett",
    "cc8b64c8-4b25-4ff9-6e7f-37b4da43d235": "Deadlock",
    "569fdd95-4d10-43ab-ca70-79becc718b46": "Yoru"
}

weapon_dictionary ={
    "1BAA85B4-4C70-1284-64BB-6481DFC3BB4E": "Ghost",
    "29a0cfab-485b-f5d5-779a-b59f85e204a8": "Classic",
    "42da8ccc-40d5-affc-beec-15aa47b42eda": "Shorty",
    "44d4e95c-4157-0037-81b2-17841bf2e8e3": "Frenzy",
    "E336C6B8-418D-9340-D77F-7A9E4CFE0702": "Sheriff",
    "ae3de142-4d85-2547-dd26-4e90bed35cf7": "Bulldog",
    "4ade7faa-4cf1-8376-95ef-39884480959b": "Guardian",
    "9c82e19d-4575-0200-1a81-3eacf00cf872": "Vandal",
    "ee8e8d15-496b-07ac-e5f6-8fae5d4c7b1a": "Phantom",
    "ec845bf4-4f79-ddda-a3da-0db3774b2794": "Judge",
    "910be174-449b-c412-ab22-d0873436b21b": "Bucky",
    "f7e1b454-4ad4-1063-ec0a-159e56b58941": "Stinger",
    "462080d1-4035-2937-7c09-27aa2a5c27a7": "Spectre",
    "c4883e50-4494-202c-3ec3-6b8a9284f00b": "Marshal",
    "a03b24d3-4319-996d-0f8c-94bbfba1dfc7": "Operator",
    "55d8a0f4-4274-ca67-fe2c-06ab45efdf58": "Ares",
    "63e6c2b6-4a8e-869c-3d4c-e38355226584": "Odin",
    "2f59173c-4bed-b6c3-2191-dea9b58be9c7": "Melee"
}


position_dictionary = {
    "e370fa57-4757-3604-3648-499e1f642d3f": "initiator",
    "dade69b4-4f5a-8528-247b-219e5a1facd6": "initiator",
    "5f8d3a7f-467b-97f3-062c-13acf203c006": "initiator",
    "f94c3b30-42be-e959-889c-5aa313dba261": "duelist",
    "22697a3d-45bf-8dd7-4fec-84a9e28c69d7": "sentinel",
    "601dbbe7-43ce-be57-2a40-4abd24953621": "initiator",
    "6f2a04ca-43e0-be17-7f36-b3908627744d": "initiator",
    "117ed9e3-49f3-6512-3ccf-0cada7e3823b": "sentinel",
    "320b2a48-4d9b-a075-30f1-1f93a9b638fa": "initiator",
    "1e58de9c-4950-5125-93e9-a0aee9f98746": "sentinel",
    "95b78ed7-4637-86d9-7e41-71ba8c293152": "controller",
    "707eab51-4836-f488-046a-cda6bf494859": "controller",
    "eb93336a-449b-9c1b-0a54-a891f7921d69": "duelist",
    "41fb69c1-4189-7b37-f117-bcaf1e96f1bf": "controller",
    "9f0d8ba9-4140-b941-57d3-a7ad57c6b417": "controller",
    "bb2a4828-46eb-8cd1-e765-15848195d751": "duelist",
    "7f94d92c-4234-0a36-9646-3a87eb8b5c89": "sentinel",
    "a3bfb853-43b2-7238-a4f1-ad90e9e46bcc": "duelist",
    "8e253930-4c05-31dd-1b6c-968525494517": "controller",
    "add6443a-41bd-e414-f6ad-e58d267f4e95": "duelist",
    "cc8b64c8-4b25-4ff9-6e7f-37b4da43d235": "sentinel",
    "569fdd95-4d10-43ab-ca70-79becc718b46": "duelist"
}

pistol_dictionary = {
    "1BAA85B4-4C70-1284-64BB-6481DFC3BB4E": "Ghost",
    "29a0cfab-485b-f5d5-779a-b59f85e204a8": "Classic",
    "42da8ccc-40d5-affc-beec-15aa47b42eda": "Shorty",
    "44d4e95c-4157-0037-81b2-17841bf2e8e3": "Frenzy",
    "E336C6B8-418D-9340-D77F-7A9E4CFE0702": "Sheriff",
}

shield_dictionary = {
    "822bcab2-40a2-324e-c137-e09195ad7692": "Heavy Shields",
    "4dec83d5-4902-9ab3-bed6-a7a390761157": "Light Shields",
}

rifle_dictionary = {
    "ae3de142-4d85-2547-dd26-4e90bed35cf7": "Bulldog",
    "4ade7faa-4cf1-8376-95ef-39884480959b": "Guardian",
    "9c82e19d-4575-0200-1a81-3eacf00cf872": "Vandal",
    "ee8e8d15-496b-07ac-e5f6-8fae5d4c7b1a": "Phantom",
}

shotgun_dictionary = {
    "ec845bf4-4f79-ddda-a3da-0db3774b2794": "Judge",
    "910be174-449b-c412-ab22-d0873436b21b": "Bucky",
}

smg_dictionary = {
    "f7e1b454-4ad4-1063-ec0a-159e56b58941": "Stinger",
    "462080d1-4035-2937-7c09-27aa2a5c27a7": "Spectre",
}

sniper_dictionary = {
    "c4883e50-4494-202c-3ec3-6b8a9284f00b": "Marshal",
    "a03b24d3-4319-996d-0f8c-94bbfba1dfc7": "Operator",
}

heavy_weapon_dictionary = {
    "55d8a0f4-4274-ca67-fe2c-06ab45efdf58": "Ares",
    "63e6c2b6-4a8e-869c-3d4c-e38355226584": "Odin",
}

melee_dictionary = {
    "2f59173c-4bed-b6c3-2191-dea9b58be9c7": "Melee"
}

rank_dictionary = {
    0: "Unranked", 1: "Unused1", 2: "Unused2",
    3: "Iron", 4: "Iron", 5: "Iron",
    6: "Bronze", 7: "Bronze", 8: "Bronze",
    9: "Silver", 10: "Silver", 11: "Silver",
    12: "Gold", 13: "Gold", 14: "Gold",
    15: "Platinum", 16: "Platinum", 17: "Platinum",
    18: "Diamond", 19: "Diamond", 20: "Diamond",
    21: "Ascendant", 22: "Ascendant", 23: "Ascendant",
    24: "Immortal", 25: "Immortal", 26: "Immortal",
    27: "Radiant"
}

map_dictionary = {
    "/Game/Maps/Ascent/Ascent": "Ascent",
    "/Game/Maps/Triad/Triad": "Haven",
    "/Game/Maps/Pitt/Pitt": "Pearl",
    "/Game/Maps/Duality/Duality": "Bind",
    "/Game/Maps/Bonsai/Bonsai": "Split",
    "/Game/Maps/Canyon/Canyon": "Fracture",
    "/Game/Maps/Jam/Jam": "Lotus",
    "/Game/Maps/Port/Port": "Icebox",
    "/Game/Maps/Foxtrot/Foxtrot": "Breeze",
    "/Game/Maps/Juliett/Juliett":"Sunset"
}

from api_configs import request_header
import requests
import time

RETRY_LIMIT = 10
def update_dicts(retry_num = 0):
    if retry_num >= RETRY_LIMIT:
        print('Retry limit exceeded')
        return None
    
    url = "https://kr.api.riotgames.com/val/content/v1/contents"
    response = requests.get(url, headers = request_header)
    status = response.status_code
    output = response.json()

    if status == 200:
        update_agents(output['characters'])
        update_maps(output['maps'])
        update_weapons(output['equips'])
        return 
    
    if status == 429:
        time.sleep(int(response.headers['Retry-After']))
        return update_dicts()
    
    if status == 503:
        time.sleep(5)
        return update_dicts()
  
    return update_dicts(retry_num + 1)

def update_agents(agents):
    new_agent_dict = {}
    for agent in agents:
        new_agent_dict[agent['id']] = agent['name']
 
    char_dictionary = new_agent_dict
    return
    
def update_maps(maps):
    new_map_dict = {}
    for map_id in maps:
        try:
            new_map_dict[map_id['assetName']] = map_id['name']
        except:
            continue
    map_dictionary = new_map_dict
    return

def update_weapons(weapons):
    new_weapon_dict = {}
    for weapon in weapons:
        new_weapon_dict[weapon['id']] = weapon['name']
        
    weapon_dictionary = new_weapon_dict
    return
